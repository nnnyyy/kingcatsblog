---
title: 비전공 직군을 위한 자바스크립트 강좌 - 5. 조건문 반복문 응용하기 
date: 2018-12-30 16:07:52
tags:
- 자바
- Java
- 프로그래밍
- 조건문
- 반복문
- 심화학습
categories:
- 프로그래밍
- Java
---

> 이 강좌는 철저히 비전공 직군에게 최대한 쉽게 프로그래밍을 이해시키기 위해 만들었습니다.
> 전공자들에겐 다소 쉽고 지루할 수 있음을 미리 경고합니다.

---

# 잡담

이걸 보기 전까지 열심히 반복학습을 했을까?

사실 여지껏 가르쳤던 사람들은 대부분 열심히 반복해서 해오지 않았다.

그냥 과제가 없으면 안했고, 있으면 어떻게든 해오긴 했으나

거기까지였다.

프로그래밍은 끊임없이 궁금해하고 이것저것 바꿔보고 

오류가 나면 찾아서 잡아내고 하면서 실력이 쌓인다. 

강좌만 보고 강좌대로 실행이 됐다고 좋아하고 끝나면

결국 백지에서 다시 뭔가를 하려고 시도했을 때 아무것도 할 수 없는 상태가 된다.

계속 궁금해하고 끊임없이 코드를 변경해서 어떠한 변화가 생기는지 시도해보자.

오늘은 그 시도를 어떤식으로 해야할지 같이 한번 해보려고 한다.

# 조건을 복잡하게 해보자

- 변수, 상수
- 조건문
- 반복문

크게는 이렇게 3가지를 배운 것 같다.

그리고 나름 게임 예시를 들어가면서 hp 라는 변수명도 만들어보고 그 값을 출력해보기도 했다.

이제는 좀 더 조건을 추가해서 상황에 따라 다른 메시지를 출력하도록 해보겠다.

이전 예제는 싸악 지우고 아래처럼 만들자.

``` java
public class HelloWorld{

     public static void main(String []args){
        
     }
}
```

그리고 아래와 같은 조건의 프로그램을 한번 만들어보도록 하자

- hp가 100이고 mp가 10인 캐릭터가 있다.
- hp가 0이 되면 죽는다.
- 한 턴마다 hp가 10씩 소모된다.
- 이 턴은 캐릭터가 죽기전까지 계속 반복된다.
- 한 턴마다 남은 hp와 mp가 표시된다.
- hp가 50 이하로 떨어지면 mp 5를 사용해서 hp 30을 회복한다.


우리가 배운 기술로만 이것을 해 볼 것이다.

일단 조건대로 코드를 만들어보자.

- hp가 100이고 mp가 10인 캐릭터가 있다.

``` java
int hp = 100;
int mp = 10;
```

- hp가 0이 되면 죽는다.

``` java
if( hp == 0 ) {
    System.out.println("죽었다");
}
```
- 한 턴마다 hp가 10씩 소모된다.
- 이 턴은 캐릭터가 죽기전까지 계속 반복된다.

이 조건은 어떻게 구현해야 할까?

일단 죽기전까지 `반복` 되어야 한다.

근데 죽는 조건은 hp 가 0 이 될 때이다.

그럼 이 반복을 다시 정의하면

> 캐릭터의 hp가 0보다 클 동안(for) 반복된다.

가 될 것이고, 이건 코드로 아래처럼 표현 가능하다.

``` java
for( ; hp > 0 ; ) {

}
```

그리고 이 반복문에 `한 턴마다 hp가 10씩 소모된다` 라는 조건을 추가한다.

기존의 hp 값에서 10을 뺀 값을 다시 hp에 설정하려면 어떻게 해야 할까?

이전 강좌에서 count를 늘리던 방법을 기억하는가?

``` java
count = count + 1;
```

이 방법을 응용해서 hp가 10이 줄어들려면 어떻게 해야하는지 생각해보자.

`hp - 10` 을 하면 기존의 hp가 100일 때 90 이 나올 것이다.

저 수식에서 나온 값을 다시 hp 변수에 대입 하는거다.

``` java
hp = hp - 10;
```

그럼 다시 올라가서 `한 턴마다 hp가 10씩 소모된다` 라는 조건의 코드를 다시 만들어보자.

``` java
for( ; hp > 0 ; hp = hp - 10) {

}
```

이건 `반복문의 증감식`에 추가한 모습이다.

또 다른 방법으로는 

``` java
for( ; hp > 0 ; ) {
    hp = hp - 10;
}
```

이렇게 해줄 수 있다.

여기까지의 전체 코드를 한번 보도록 하자.

``` java
public class HelloWorld{

     public static void main(String []args){
        int hp = 100;
        int mp = 10;

        for( ; hp > 0 ; hp = hp - 10 ) {

        }

        if( hp == 0 ) {
            System.out.println("죽었다");
        }
     }
}
```

- 한 턴마다 남은 hp와 mp가 표시된다.

``` java
for( ; hp > 0 ; hp = hp - 10 ) {    
    System.out.print("hp : ");
    System.out.println(hp);
    System.out.print("mp : ");
    System.out.println(mp);
    System.out.println("----------");
}
```

여기까지 하고 난 후 실행시키면 다음과 같이 될 것이다.

```
hp : 100
mp : 10
----------
hp : 90
mp : 10
----------
hp : 80
mp : 10
----------
hp : 70
mp : 10
----------
hp : 60
mp : 10
----------
hp : 50
mp : 10
----------
hp : 40
mp : 10
----------
hp : 30
mp : 10
----------
hp : 20
mp : 10
----------
hp : 10
mp : 10
----------
죽었다
```

이제 마지막 조건을 추가해보자.

- hp가 50 이하로 떨어지면 mp 5를 사용해서 hp 30을 회복한다.

이 조건이 이전에 배웠던 것에 비해 상당히 까다로운 조건이다.

하지만 천천히 읽고 따라가면 어렵지 않다.

> (만약) hp가 50 이하로 떨어지면

``` java
if( hp <= 50 ) {

}
```

> mp 5를 사용해서

``` java
if( hp <= 50 ) {
    mp = mp - 5;
}
```

> hp 30을 회복한다.

``` java
if( hp <= 50 ) {
    mp = mp - 5;
    hp = hp + 30;
}
```

여기에 `hp를 30 회복했습니다` 라는 문구도 심심하니 넣어주자.

``` java
if( hp <= 50 ) {
    mp = mp - 5;
    hp = hp + 30;
    System.out.println("hp를 30 회복했습니다.");
}
```

이제 이 코드를 반복문 안에 슬며시 넣어주자
``` java
public class HelloWorld{

     public static void main(String []args){
         int hp = 100;
         int mp = 10;

         for( ; hp > 0 ; hp = hp - 10 ) {

             // 여기에 넣어주었다.
             if( hp <= 50 ) {
                mp = mp - 5;
                hp = hp + 30;
                System.out.println("hp를 30 회복했습니다.");
            }
            
            System.out.print("hp : ");
            System.out.println(hp);
            System.out.print("mp : ");
            System.out.println(mp);
            System.out.println("----------");
         }
         
         if( hp == 0 ) {
            System.out.println("죽었다");
        }
     }
}
```

이 코드는 문제 없이 잘 돌아갈까?

한번 실행해보기 바란다.

어떻게 됐는가.

기대와는 달리 프로그램이 오랫동안 반복되다가 죽어버릴 것이다.

# 왜 제대로 되지 않는걸까?

저 코드에서의 문제점은 무엇일까?

감이 오는가?

같이 해보기 전에 약 10분간 스스로 한번 문제점을 찾아보자.

.
.
.
.
.
.
.
.
.
5분
.
.
.
.
.
.
.
10분!

찾은 사람들은 일단 축하한다!

축하받아 마땅하다.

코드의 버그를 `디버깅` 할 수 있는 능력이 자연스럽게 생겼기 때문이다.

# 문제는 끝없는 hp 회복

제목에서 얘기 했듯이 문제는 바로 `hp 30 회복` 에 있다.

반복문의 종료 조건은 `hp가 0 이하일 때` 인데, 

종료를 못하게 자꾸 hp를 회복시키기 때문에 프로그램이 끊임없이 반복 되는 것이다.

이건 애초에 프로그램 설계에 오류가 있는 것이고, 조건을 변경하던지 추가하던지 해서

어떻게든 프로그램을 원하는 방향으로 만들어야 한다.

여기서는 이 문제를 잡기 위해 이 조건을 추가 해 보았다.

- 단, mp 가 부족하면 회복하지 않는다.

그런데 이미 위 조건에서 회복할 때마다 mp 5를 소모 하고 있다.

이 조건이 의미가 있는 걸까? 라고 물으면

당연히 엄청나게 의미가 있다!

지금 상태는 `mp 가 0을 넘어서 마이너스가 된 상태에서도 계속 제한 없이 회복`을 해주고 있다.

이것은 의도한 바가 아니다. mp가 없으면 회복은 멈춰야 한다. 

( 물론 게임에선 자연회복이란 것도 있지만... 여기선 그런거 없다 )

# mp 조건의 추가

그럼 추가한 조건을 코드로 만들어보자.

`mp가 부족하다` 를 코드로 표현해야하는데, 어느정도여야 부족한 것일까?

아까 회복할 때마다 mp를 5를 소모한다고 했다.

그렇다면 회복을 하기 위해서는 최소 5 이상의 mp가 있어야 한다.

`mp가 부족하면 회복하지 않는다` 는 것은 바꿔 말하면 

`mp에 여유가 있으면 회복해라` 라는 뜻도 되기 때문에 

다음과 같이 써 줄 수 있다.

``` java
if( mp >= 5 ) {
    // 회복
}
```

그럼 이 조건을 추가해서 다시 프로그램을 완성 시켜보자.

``` java
public class HelloWorld{

     public static void main(String []args){
         int hp = 100;
         int mp = 10;

         for( ; hp > 0 ; hp = hp - 10 ) {

             // 여기에 넣어주었다.
             if( hp <= 50 ) {
                 if( mp >= 5 ) {
                    mp = mp - 5;
                    hp = hp + 30;
                    System.out.println("hp를 30 회복했습니다.");
                 }                
            }
            
            System.out.print("hp : ");
            System.out.println(hp);
            System.out.print("mp : ");
            System.out.println(mp);
            System.out.println("----------");
         }
         
         if( hp == 0 ) {
            System.out.println("죽었다");
        }
     }
}
```

자 다시 실행시켜 보자!!

```
hp : 100
mp : 10
----------
hp : 90
mp : 10
----------
hp : 80
mp : 10
----------
hp : 70
mp : 10
----------
hp : 60
mp : 10
----------
hp를 30 회복했습니다.
hp : 80
mp : 5
----------
hp : 70
mp : 5
----------
hp : 60
mp : 5
----------
hp를 30 회복했습니다.
hp : 80
mp : 0
----------
hp : 70
mp : 0
----------
hp : 60
mp : 0
----------
hp : 50
mp : 0
----------
hp : 40
mp : 0
----------
hp : 30
mp : 0
----------
hp : 20
mp : 0
----------
hp : 10
mp : 0
----------
죽었다
```

이제야 원하는대로 프로그램이 동작하기 시작했다

현업에서도 일은 별반 다르지 않다.

이런 실수, 수정 작업의 연속이다.

# 다음에는

`함수`를 살짝 배워볼까 한다.

휴... 

내가 학교 다닐 때를 생각하면 여기저기 포기하고 싶은 구간이 있었는데

그 구간에 다가가고 있는 것 같다...

그러나 여기서 포기하면 끝이다.

최대한 천천히 설명하려고 노력할테니 끝까지 따라왔으면 좋겠다.

( 이러다가 귀찮으면 내가 안쓰긴한다... )